/*! jtrack 2014-03-25 */
var pageTracker=null,_gaq=_gaq||[],jtrackedOptions=[];!function(jQuery,undefined){"use strict";function defined(a){return"undefined"!=typeof a}function evaluate(ele,obj){if("function"==typeof obj)obj=obj(ele);else try{obj=eval("("+obj+"(ele));")}catch(err){}return obj!==!1?obj:void 0}function debug(a){if(defined(jQuery.jtrack)&&jQuery.jtrack.defaults.debug.run&&jQuery.jtrack.defaults.debug.v_console){if(jQuery("#vConsole").length<=0){var b=jQuery("body").html(),c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;jQuery("body").html('<div style="margin-right:380px;">'+b.replace(c,"")+"</div>"),jQuery("body").prepend('<div id="vConsole" style="float:right;border:1px solid #333; position:fixed; top: 0px; right:0px; width:350px; height:100%;padding: 0 15px;overflow-y: scroll; background: none repeat scroll 0% 0% #fff" ><h1>vConsole</h1></div>')}jQuery("#vConsole").append(a)}return defined(jQuery.jtrack)&&jQuery.jtrack.defaults.debug.run&&jQuery.jtrack.defaults.debug.console&&defined(console)&&defined(console.debug)&&console.debug(a)}function dump(a,b){var c,d,e,f,g="";for(b||(b=0),c="",d=0;b+1>d;d++)c+=" ";if("object"==typeof a){for(e in a)f=a[e];g+="object"==typeof f?g+=dump(f,b+1):c+"'"+e+"' => \""+f+'"\n'}else g="===>"+a+"<===("+typeof a+")";return g}function check(){return window.jQuery&&jQuery.fn&&/^[1-9]\.[7-9]/.test(jQuery.fn.jquery)}jQuery.jtrack=function(a){if(jQuery.isPlainObject(a)){var b=jQuery.extend({},{},a),c="undefined"!=typeof b.domainName&&""!==b.domainName?b.domainName:window.location.host;defined(b.load_analytics)?jQuery.fn.trackPage(b.load_analytics.account,defined(b.load_analytics.options)?b.load_analytics.options:null,function(){defined(b.trackevents)&&jQuery.each(b.trackevents,function(a,b){var d=b.element.replace("**SELF_DOMAIN**",c);jQuery(d).track(defined(b.options)?b.options:null)})}):defined(b.trackevents)&&jQuery.each(b.trackevents,function(a,b){var d=b.element.replace("**SELF_DOMAIN**",c);jQuery(d).track(defined(b.options)?b.options:null)})}else jOps=jtrackedOptions[a],jOps.ele.triggerHandler(jOps.transactedEvent)},jQuery.jtrack.defaults={mode:"event",category:function(a){return a[0].hostname===location.hostname?"internal":"external"},action:function(a){return"undefined"!=typeof a.attr("alt")?a.attr("alt"):""},label:function(a){return"undefined"!=typeof a.text()?a.attr("href"):""},value:function(a){return"undefined"!=typeof a.text()?a.text():""},eventTracked:"click",noninteraction:!1,skip_internal:!1,overwrites:!0,skip_campaign:!1,alias:null,callback:function(){},debug:{run:!1,v_console:!0}},jQuery.fn.trackPage=function(a,b,c){function d(a,b){debug("<hr/><h2>Google Analytics loaded</h2><hr/>");var c="//www.google-analytics.com/plugins/ga/inpage_linkid.js";_gaq.push(["_require","inpage_linkid",c]),_gaq.push(["_setAccount",a]),_gaq.push(["_setAllowLinker",!0]),_gaq.push(["_setDomainName","undefined"!=typeof f.domainName?f.domain:window.location.host]),pageTracker=_gat._createTracker(a),"undefined"!=typeof f.domainName&&("undefined"==typeof f._addIgnoredRef||"undefined"!=typeof f._addIgnoredRef&&f._addIgnoredRef!==!1)&&_gaq.push(["_addIgnoredRef",f.domain]),"undefined"!=typeof f.cookiePath&&_gaq.push(["_setCookiePath",f.cookiePath]),null===f.status_code||200===f.status_code?_gaq.push(["_trackPageview"]):(debug("Tracking error "+f.status_code),_gaq.push(["_trackPageview","/"+f.status_code+".html?page="+document.location.pathname+document.location.search+"&from="+document.referrer])),jQuery.isFunction(b)&&b(pageTracker)}var e="https:"===document.location.protocol?"https://ssl":"http://www",f=jQuery.extend({},{onload:!0,status_code:200},b),g=e+".google-analytics.com/ga.js";"undefined"!=typeof _gat&&_gaq.length>0?debug("<hr/><h2>!!!!!! Google Analytics loaded previously !!!!!!! </h2><hr/>"):load_script=function(){jQuery.ajax({type:"GET",url:g,success:function(){if(!defined(_gat))throw debug("<hr/><h2>!!!!!! _gat has NOT been defined !!!!!!! </h2><hr/>"),"_gat has not been defined";debug("<hr/><h2>!!!!!! loaded the GA code !!!!!!! </h2><hr/>"),d(a,c)},dataType:"script",cache:!0})},f.onload===!0||null===f.onload?jQuery(document).ready(function(){load_script()}):load_script()},jQuery.jtrack.trackEvent=function(a,b,c,d,e,f){if(defined(a)){var g=["_trackEvent"];null!==b&&g.push(b),null!==c&&g.push(c),null!==d&&g.push(d),null!==e&&g.push(e),null!==f&&g.push(f),a._trackEvent(b,c,d,e,f),debug("<h4>Fired event for Tracking</h4><h5>for _event</h5>"),debug("<pre>"+dump(g)+"</pre>")}else debug("<h1>FATAL: pageTracker is not defined</h1>")},jQuery.jtrack.trackSocial=function(a,b,c,d){if(defined(pageTracker)){var e=["_trackSocial"];null!==a&&e.push(a),null!==b&&e.push(b),null!==c&&e.push(c),null!==d&&e.push(d),pageTracker._trackSocial(a,b,c,d)}else debug("<h1>FATAL: pageTracker is not defined</h1>")},jQuery.jtrack.trackPageview=function(a,b){defined(a)&&(a._trackPageview(b),debug("<h4>Fired event for _trackPageview</h4><h5>for "+b+"</h5>"))},jQuery.jtrack.make_campaign_str=function(a){function b(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null}function c(){var a={},c=b("__utmz");if(c){var d=c.split(".");if(d.length>=4){var e=d[4].split("|");for(i=0;i<e.length;i++){var f=e[i].split("=");a[f[0]]=f[1]}}}return a}var d=c(),e="";return 0!==d.length&&"undefined"!==d.utmccn&&"(direct)"!==d.utmccn&&"(referral)"!==d.utmccn&&"undefined"!==d.utmcsr&&"(direct)"!==d.utmcsr&&"(referral)"!==d.utmcsr?("undefined"!==d.utmcsr&&(e+="utm_source="+d.utmcsr),"undefined"!==d.utmcmd&&(e+="&utm_medium="+d.utmcmd),"undefined"!==d.utmccn&&(e+="&utm_campaign="+d.utmccn),"undefined"!==d.utmctr&&(e+="&utm_term="+d.utmctr),"undefined"!==d.utmccn&&(e+="&utm_content="+d.utmccn)):(campaign="undefined"!==d.utmcsr?d.utmcsr:"",e+="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+campaign+"&utm_term=&utm_content="),"utm_source=undefined&utm_medium=undefined&utm_campaign=undefined&utm_term=undefined&utm_content=undefined"==e&&(campaign="undefined"!==d.utmcsr?d.utmcsr:"",e="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+campaign+"&utm_term=&utm_content="),jQuery.isFunction(a)?(a(e),!1):e},jQuery.jtrack.make_forced_camp=function(a,b){if(b.indexOf("_link")>-1&&"added"!=a.data("tracker")){var c=a.attr("href"),d=jQuery.jtrack.make_campaign_str();debug(d+" of camp"),""!==d&&-1==window.location.toString().indexOf("inquiry?")&&(a.attr("href",c+(c.indexOf("?")>-1?"&":"?")+d),debug(a.attr("href")+" of camp"),a.data("tracker","added"))}},jQuery.fn.track=function(a){return jQuery.each(jQuery(this),function(){var b=jQuery(this),c=jQuery.extend({},jQuery.jtrack.defaults,a),d=evaluate(b,c.overwrites);if(d="undefined"==d?"true":d,b.is(".tracked")&&"false"===d)return!1;var e=c.mode,f=evaluate(b,c.alias),g=evaluate(b,c.category),h=evaluate(b,c.action),i=evaluate(b,c.eventTracked);h=""===h?i:h;var j=evaluate(b,c.label),k=evaluate(b,c.value);k=isNaN(k)?1:k;var l=evaluate(b,c.skip_internal),m=evaluate(b,c.skip_campaign),n=evaluate(b,c.noninteraction);n="undefined"===n?"false":n;var o=(c._link,evaluate(b,c.callback));b.addClass("tracked"),b.attr("role",i+"_"+h+"_"+g);var p=i+"."+("undefined"===f||null===f?"jtrack":f),q=l&&b[0].hostname===location.hostname,r="undefined"===f||null===f?i:f;jtrackedOptions[r]=[],jtrackedOptions[r].ele=b,jtrackedOptions[r].transactedEvent=p,check()?("true"===d&&(b.off(p),b.unbind(p)),b.on(p,function(a){if(e.indexOf("_link")>-1&&(a.preventDefault(),a.stopPropagation(),m||jQuery.jtrack.make_forced_camp(b,e)),!q&&e.indexOf("event")>-1&&jQuery.jtrack.trackEvent(pageTracker,g,h,j,k,n,o),e.indexOf("_social")>-1){var d=evaluate(b,c.network),f=evaluate(b,c.socialAction);jQuery.jtrack.trackSocial(d,f)}return e.indexOf("_link")>-1?(debug("<h4>Fired _link for Tracking</h4><h5>for _link</h5>"),debug("<pre>"+b.attr("href")+"</pre>"),_gaq.push(["_link",b.attr("href")]),_gaq.push(function(){{var a=_gat._getTrackerByName();a._getLinkerUrl(window.location.toString())}window.location.href=b.attr("href")}),!1):!0})):("true"===d&&(b.die(p),b.unbind(p)),b.live(p,function(a){if(e.indexOf("_link")>-1&&(a.preventDefault(),a.stopPropagation(),m||jQuery.jtrack.make_forced_camp(b,e)),!q&&e.indexOf("event")>-1&&jQuery.jtrack.trackEvent(pageTracker,g,h,j,k,n,o),e.indexOf("_social")>-1){var d=evaluate(b,c.network),f=evaluate(b,c.socialAction);jQuery.jtrack.trackSocial(d,f)}return e.indexOf("_link")>-1?(debug("<h4>Fired _link for Tracking</h4><h5>for _link</h5>"),debug("<pre>"+b.attr("href")+"</pre>"),_gaq.push(["_link",b.attr("href")]),_gaq.push(function(){{var a=_gat._getTrackerByName();a._getLinkerUrl(window.location.toString())}window.location.href=b.attr("href")}),!1):!0}))})}}(jQuery,"undefined");